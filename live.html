<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRAKIO v4.4.0 - Cours</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“¡</text></svg>">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <!-- TRAKIO Core -->
    <script src="trakio-config.js?v=4.4.0"></script>
    <script src="trakio-sync.js?v=4.4.0"></script>
    <script src="trakio-ui.js?v=4.4.0"></script>
    
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-card: #1e293b;
            --bg-hover: #334155;
            --border-color: #475569;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --accent-primary: #0ea5e9;
            --accent-secondary: #0ea5e9;
            --accent-warning: #f59e0b;
            --accent-danger: #ef4444;
            --accent-purple: #8b5cf6;
            --accent-orange: #f59e0b;
            --accent-live: #ef4444;
            --radius: 16px;
            --radius-sm: 10px;
            --shadow: 0 8px 32px rgba(0,0,0,0.4);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HEADER LIVE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .header-live {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: linear-gradient(135deg, rgba(255, 71, 87, 0.15), rgba(255, 107, 53, 0.1));
            border: 1px solid rgba(255, 71, 87, 0.3);
            border-radius: var(--radius);
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: var(--accent-live);
            border-radius: 30px;
            animation: pulse-live 2s infinite;
        }

        @keyframes pulse-live {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.5); }
            50% { box-shadow: 0 0 0 12px rgba(255, 71, 87, 0); }
        }

        .live-dot {
            width: 10px;
            height: 10px;
            background: #fff;
            border-radius: 50%;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .live-text {
            font-size: 14px;
            font-weight: 800;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .logo-block {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .logo-icon {
            width: 52px;
            height: 52px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .logo-text h1 {
            font-size: 26px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo-text .subtitle {
            font-size: 12px;
            color: var(--text-muted);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .time-display {
            padding: 10px 20px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            font-family: 'Space Mono', monospace;
            font-size: 20px;
            font-weight: 700;
        }

        .refresh-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            font-size: 12px;
            color: var(--text-muted);
        }

        .refresh-spinner {
            width: 16px;
            height: 16px;
            border: 2px solid var(--border-color);
            border-top-color: var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ALERTES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .alerts-section {
            margin-bottom: 24px;
        }

        .alert {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 20px;
            border-radius: var(--radius);
            margin-bottom: 12px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .alert-danger {
            background: linear-gradient(135deg, rgba(239, 71, 111, 0.15), rgba(239, 71, 111, 0.05));
            border: 1px solid rgba(239, 71, 111, 0.3);
        }

        .alert-warning {
            background: linear-gradient(135deg, rgba(255, 209, 102, 0.15), rgba(255, 209, 102, 0.05));
            border: 1px solid rgba(255, 209, 102, 0.3);
        }

        .alert-success {
            background: linear-gradient(135deg, rgba(6, 214, 160, 0.15), rgba(6, 214, 160, 0.05));
            border: 1px solid rgba(6, 214, 160, 0.3);
        }

        .alert-icon {
            font-size: 28px;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-size: 15px;
            font-weight: 700;
        }

        .alert-desc {
            font-size: 13px;
            color: var(--text-muted);
        }

        .alert-action {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .alert-action:hover {
            background: rgba(255,255,255,0.2);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           KPI GRID
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .kpi-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
        }

        .kpi-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
        }

        .kpi-card.primary::before { background: var(--accent-primary); }
        .kpi-card.secondary::before { background: var(--accent-secondary); }
        .kpi-card.warning::before { background: var(--accent-warning); }
        .kpi-card.danger::before { background: var(--accent-danger); }
        .kpi-card.purple::before { background: var(--accent-purple); }
        .kpi-card.orange::before { background: var(--accent-orange); }

        .kpi-icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .kpi-value {
            font-size: 36px;
            font-weight: 800;
            font-family: 'Space Mono', monospace;
            line-height: 1;
        }

        .kpi-label {
            font-size: 13px;
            color: var(--text-muted);
            margin-top: 8px;
        }

        .kpi-trend {
            position: absolute;
            top: 16px;
            right: 16px;
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
        }

        .kpi-trend.up {
            background: rgba(6, 214, 160, 0.2);
            color: var(--accent-primary);
        }

        .kpi-trend.down {
            background: rgba(239, 71, 111, 0.2);
            color: var(--accent-danger);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           QUICK ACTIONS - HUB CENTRAL
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .actions-section {
            margin-bottom: 24px;
        }

        .section-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
        }

        .action-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 20px 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            color: inherit;
            position: relative;
        }

        .action-card:hover {
            border-color: var(--accent-primary);
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }

        .action-card.featured {
            background: linear-gradient(135deg, rgba(6, 214, 160, 0.1), rgba(17, 138, 178, 0.1));
            border-color: var(--accent-primary);
        }

        .action-card .badge {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 4px 8px;
            background: var(--accent-primary);
            color: #000;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 700;
        }

        .action-icon {
            font-size: 36px;
            margin-bottom: 12px;
        }

        .action-label {
            font-size: 14px;
            font-weight: 700;
        }

        .action-sublabel {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .action-kbd {
            display: inline-block;
            padding: 2px 8px;
            background: var(--bg-hover);
            border-radius: 4px;
            font-size: 10px;
            font-family: 'Space Mono', monospace;
            color: var(--text-muted);
            margin-top: 8px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MAIN GRID - 2 COLONNES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
        }

        @media (max-width: 1100px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .card-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header h3 {
            font-size: 15px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-header .filter {
            padding: 8px 12px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 12px;
        }

        .card-body {
            padding: 16px 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        /* Timeline Items */
        .timeline-item {
            display: flex;
            gap: 16px;
            padding: 14px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .timeline-item:last-child {
            border-bottom: none;
        }

        .timeline-time {
            width: 50px;
            text-align: center;
            flex-shrink: 0;
        }

        .timeline-time .hour {
            font-size: 16px;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
        }

        .timeline-time .date {
            font-size: 10px;
            color: var(--text-muted);
        }

        .timeline-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
            margin-top: 4px;
        }

        .timeline-dot.shopify { background: #96bf48; }
        .timeline-dot.myfish { background: var(--accent-purple); }
        .timeline-dot.trakio { background: var(--accent-secondary); }

        .timeline-content {
            flex: 1;
        }

        .timeline-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .timeline-details {
            font-size: 12px;
            color: var(--text-muted);
        }

        .timeline-amount {
            font-size: 15px;
            font-weight: 700;
            color: var(--accent-primary);
            font-family: 'Space Mono', monospace;
        }

        /* Activity Items */
        .activity-item {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .activity-icon.order { background: rgba(6, 214, 160, 0.15); }
        .activity-icon.client { background: rgba(17, 138, 178, 0.15); }
        .activity-icon.payment { background: rgba(255, 209, 102, 0.15); }
        .activity-icon.alert { background: rgba(239, 71, 111, 0.15); }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            font-size: 13px;
        }

        .activity-time {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* Footer */
        .footer-bar {
            margin-top: 24px;
            padding: 16px 24px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .footer-info {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .footer-stat {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: var(--text-muted);
        }

        .footer-stat .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .footer-stat .dot.green { background: var(--accent-primary); }
        .footer-stat .dot.yellow { background: var(--accent-warning); }
        .footer-stat .dot.red { background: var(--accent-danger); }

        .footer-version {
            font-size: 12px;
            color: var(--text-muted);
            font-family: 'Space Mono', monospace;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 12px;
            opacity: 0.5;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             HEADER LIVE
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="header-live">
            <div class="header-left">
                <div class="live-indicator">
                    <div class="live-dot"></div>
                    <span class="live-text">Live</span>
                </div>
                <div class="logo-block">
                    <div class="logo-icon">ğŸŸ</div>
                    <div class="logo-text">
                        <h1>TRAKIO</h1>
                        <div class="subtitle">Dashboard temps rÃ©el</div>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div class="refresh-badge">
                    <div class="refresh-spinner"></div>
                    <span>Refresh: <span id="refresh-countdown">30</span>s</span>
                </div>
                <div class="time-display" id="current-time">--:--:--</div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             ALERTES
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="alerts-section" id="alerts-container">
            <!-- GÃ©nÃ©rÃ© par JS -->
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             KPIs
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="kpi-grid">
            <div class="kpi-card primary" onclick="window.location.href='commandes.html'">
                <div class="kpi-icon">ğŸ’°</div>
                <div class="kpi-value" id="kpi-ca">0</div>
                <div class="kpi-label">CA Aujourd'hui (CHF)</div>
                <div class="kpi-trend up" id="kpi-ca-trend">â†‘ +0%</div>
            </div>
            <div class="kpi-card secondary" onclick="window.location.href='commandes.html'">
                <div class="kpi-icon">ğŸ“¦</div>
                <div class="kpi-value" id="kpi-orders">0</div>
                <div class="kpi-label">Commandes du jour</div>
            </div>
            <div class="kpi-card warning">
                <div class="kpi-icon">â³</div>
                <div class="kpi-value" id="kpi-pending">0</div>
                <div class="kpi-label">En attente</div>
            </div>
            <div class="kpi-card danger">
                <div class="kpi-icon">ğŸš¨</div>
                <div class="kpi-value" id="kpi-urgent">0</div>
                <div class="kpi-label">Urgentes</div>
            </div>
            <div class="kpi-card purple" onclick="window.location.href='shopify.html'">
                <div class="kpi-icon">ğŸ›ï¸</div>
                <div class="kpi-value" id="kpi-shopify">0</div>
                <div class="kpi-label">Shopify Ã  traiter</div>
            </div>
            <div class="kpi-card orange" onclick="window.location.href='clients.html'">
                <div class="kpi-icon">ğŸ‘¥</div>
                <div class="kpi-value" id="kpi-clients">0</div>
                <div class="kpi-label">Clients actifs</div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             ACTIONS RAPIDES
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="actions-section">
            <div class="section-title">ğŸ›ï¸ AccÃ¨s rapides</div>
            <div class="actions-grid">
                <a href="myfish.html" class="action-card featured">
                    <span class="badge">â­ PRO</span>
                    <div class="action-icon">ğŸŸ</div>
                    <div class="action-label">MyFish</div>
                    <div class="action-sublabel">Vente magasin</div>
                    <div class="action-kbd">M</div>
                </a>
                <a href="commandes.html" class="action-card featured">
                    <span class="badge">â­ PRO</span>
                    <div class="action-icon">ğŸ“¦</div>
                    <div class="action-label">Commandes</div>
                    <div class="action-sublabel">B2B / B2C</div>
                    <div class="action-kbd">N</div>
                </a>
                <a href="shopify.html" class="action-card">
                    <div class="action-icon">ğŸ›ï¸</div>
                    <div class="action-label">Shopify</div>
                    <div class="action-sublabel">Web orders</div>
                    <div class="action-kbd">S</div>
                </a>
                <a href="articles.html" class="action-card">
                    <div class="action-icon">ğŸ“‹</div>
                    <div class="action-label">Articles</div>
                    <div class="action-sublabel">Catalogue</div>
                    <div class="action-kbd">A</div>
                </a>
                <a href="clients.html" class="action-card">
                    <div class="action-icon">ğŸ‘¥</div>
                    <div class="action-label">Clients</div>
                    <div class="action-sublabel">CRM</div>
                    <div class="action-kbd">C</div>
                </a>
                <a href="cloud.html" class="action-card">
                    <div class="action-icon">â˜ï¸</div>
                    <div class="action-label">Cloud</div>
                    <div class="action-sublabel">Sync & Backup</div>
                    <div class="action-kbd">K</div>
                </a>
                <a href="compta.html" class="action-card">
                    <div class="action-icon">ğŸ’µ</div>
                    <div class="action-label">Compta</div>
                    <div class="action-sublabel">Finances</div>
                </a>
                <a href="whatsapp.html" class="action-card">
                    <div class="action-icon">ğŸ’¬</div>
                    <div class="action-label">WhatsApp</div>
                    <div class="action-sublabel">Messages</div>
                </a>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             MAIN CONTENT
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="main-grid">
            <!-- Timeline Commandes -->
            <div class="card">
                <div class="card-header">
                    <h3>ğŸ“‹ Commandes Ã  venir</h3>
                    <select class="filter" id="timeline-filter" onchange="loadTimeline()">
                        <option value="today">Aujourd'hui</option>
                        <option value="tomorrow">Demain</option>
                        <option value="week">Cette semaine</option>
                    </select>
                </div>
                <div class="card-body" id="timeline-container">
                    <!-- GÃ©nÃ©rÃ© par JS -->
                </div>
            </div>

            <!-- ActivitÃ© rÃ©cente -->
            <div class="card">
                <div class="card-header">
                    <h3>âš¡ ActivitÃ© rÃ©cente</h3>
                </div>
                <div class="card-body" id="activity-container">
                    <!-- GÃ©nÃ©rÃ© par JS -->
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             FOOTER
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="footer-bar">
            <div class="footer-info">
                <div class="footer-stat">
                    <span class="dot green"></span>
                    <span id="status-dropbox">Dropbox: ConnectÃ©</span>
                </div>
                <div class="footer-stat">
                    <span class="dot" id="firebase-dot"></span>
                    <span id="status-firebase">Firebase: â€”</span>
                </div>
                <div class="footer-stat">
                    <span class="dot green"></span>
                    <span>DerniÃ¨re sync: <span id="last-sync">--:--</span></span>
                </div>
            </div>
            <div class="footer-version">TRAKIO v4.2.0</div>
        </div>
    </div>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CONFIGURATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        const REFRESH_INTERVAL = 30;
        let refreshCountdown = REFRESH_INTERVAL;

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // INIT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        document.addEventListener('DOMContentLoaded', function() {
            updateTime();
            setInterval(updateTime, 1000);
            
            loadData();
            startAutoRefresh();
            checkConnections();
            
            // Raccourcis clavier
            document.addEventListener('keydown', function(e) {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
                
                switch(e.key.toLowerCase()) {
                    case 'm': window.location.href = 'myfish.html'; break;
                    case 'n': window.location.href = 'commandes.html'; break;
                    case 's': window.location.href = 'shopify.html'; break;
                    case 'a': window.location.href = 'articles.html'; break;
                    case 'c': window.location.href = 'clients.html'; break;
                    case 'k': window.location.href = 'cloud.html'; break;
                }
            });
        });

        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = 
                now.toLocaleTimeString('fr-CH', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        }

        function startAutoRefresh() {
            setInterval(() => {
                refreshCountdown--;
                document.getElementById('refresh-countdown').textContent = refreshCountdown;
                
                if (refreshCountdown <= 0) {
                    refreshCountdown = REFRESH_INTERVAL;
                    loadData();
                }
            }, 1000);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // LOAD DATA
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function loadData() {
            loadKPIs();
            loadAlerts();
            loadTimeline();
            loadActivity();
            document.getElementById('last-sync').textContent = 
                new Date().toLocaleTimeString('fr-CH', { hour: '2-digit', minute: '2-digit' });
        }

        function loadKPIs() {
            const orders = JSON.parse(localStorage.getItem('trakio_orders') || '[]');
            const mfOrders = JSON.parse(localStorage.getItem('mf_orders') || '[]');
            const shopifyOrders = JSON.parse(localStorage.getItem('shopify_orders') || '[]');
            const clients = JSON.parse(localStorage.getItem('trakio_quickorder') || '{}');

            const today = new Date().toDateString();
            const allOrders = [...orders, ...mfOrders];

            // CA du jour
            const todayOrders = allOrders.filter(o => {
                const orderDate = new Date(o.date || o.createdAt);
                return orderDate.toDateString() === today;
            });
            const caJour = todayOrders.reduce((sum, o) => sum + (o.total || 0), 0);

            // Shopify urgentes
            const shopifyUrgent = shopifyOrders.filter(o => 
                o.financialStatus === 'paid' && !o.processed
            ).length;

            // Clients actifs
            const clientsArray = clients.clients || [];
            const activeClients = clientsArray.filter(c => c.active !== false).length;

            // Pending
            const pendingCount = allOrders.filter(o => o.status === 'pending').length;

            // Update KPIs avec animation
            animateNumber('kpi-ca', caJour);
            animateNumber('kpi-orders', todayOrders.length);
            animateNumber('kpi-pending', pendingCount);
            animateNumber('kpi-urgent', shopifyUrgent);
            animateNumber('kpi-shopify', shopifyUrgent);
            animateNumber('kpi-clients', activeClients);
        }

        function animateNumber(elementId, targetValue) {
            const el = document.getElementById(elementId);
            const current = parseInt(el.textContent.replace(/[^\d]/g, '')) || 0;
            const duration = 400;
            const steps = 15;
            const increment = (targetValue - current) / steps;
            let step = 0;

            const timer = setInterval(() => {
                step++;
                const value = Math.round(current + (increment * step));
                el.textContent = elementId.includes('ca') ? value.toLocaleString('fr-CH') : value;
                
                if (step >= steps) {
                    clearInterval(timer);
                    el.textContent = elementId.includes('ca') ? targetValue.toLocaleString('fr-CH') : targetValue;
                }
            }, duration / steps);
        }

        function loadAlerts() {
            const container = document.getElementById('alerts-container');
            const alerts = [];

            const shopifyOrders = JSON.parse(localStorage.getItem('shopify_orders') || '[]');
            const urgent = shopifyOrders.filter(o => o.financialStatus === 'paid' && !o.processed);

            if (urgent.length > 0) {
                alerts.push({
                    type: 'danger',
                    icon: 'ğŸš¨',
                    title: `${urgent.length} commande(s) Shopify Ã  traiter!`,
                    desc: 'Commandes payÃ©es en attente de prÃ©paration',
                    action: 'Voir',
                    url: 'shopify.html'
                });
            }

            const today = new Date().toDateString();
            const pickupsToday = shopifyOrders.filter(o => {
                if (!o.pickupDate) return false;
                const pickupDate = parseDate(o.pickupDate);
                return pickupDate && pickupDate.toDateString() === today;
            });

            if (pickupsToday.length > 0) {
                alerts.push({
                    type: 'warning',
                    icon: 'ğŸ“¦',
                    title: `${pickupsToday.length} retrait(s) prÃ©vu(s) aujourd'hui`,
                    desc: 'PrÃ©parez les commandes pour le retrait',
                    action: 'Voir',
                    url: 'shopify.html'
                });
            }

            if (alerts.length === 0) {
                container.innerHTML = `
                    <div class="alert alert-success">
                        <div class="alert-icon">âœ…</div>
                        <div class="alert-content">
                            <div class="alert-title">Tout est en ordre!</div>
                            <div class="alert-desc">Aucune alerte pour le moment</div>
                        </div>
                    </div>
                `;
                return;
            }

            container.innerHTML = alerts.map(alert => `
                <div class="alert alert-${alert.type}">
                    <div class="alert-icon">${alert.icon}</div>
                    <div class="alert-content">
                        <div class="alert-title">${alert.title}</div>
                        <div class="alert-desc">${alert.desc}</div>
                    </div>
                    <button class="alert-action" onclick="window.location.href='${alert.url}'">${alert.action} â†’</button>
                </div>
            `).join('');
        }

        function parseDate(dateStr) {
            if (!dateStr) return null;
            const months = { 'Jan':0, 'Feb':1, 'Mar':2, 'Apr':3, 'May':4, 'Jun':5, 'Jul':6, 'Aug':7, 'Sep':8, 'Oct':9, 'Nov':10, 'Dec':11 };
            const match = dateStr.match(/(\d{1,2})\s+(\w{3})\s+(\d{4})/);
            if (match) {
                return new Date(parseInt(match[3]), months[match[2]], parseInt(match[1]));
            }
            // Try ISO format
            const isoDate = new Date(dateStr);
            return isNaN(isoDate) ? null : isoDate;
        }

        function loadTimeline() {
            const container = document.getElementById('timeline-container');
            const orders = JSON.parse(localStorage.getItem('trakio_orders') || '[]');
            const mfOrders = JSON.parse(localStorage.getItem('mf_orders') || '[]');
            const shopifyOrders = JSON.parse(localStorage.getItem('shopify_orders') || '[]');

            const allOrders = [
                ...orders.map(o => ({ ...o, source: 'trakio' })),
                ...mfOrders.map(o => ({ ...o, source: 'myfish' })),
                ...shopifyOrders.map(o => ({ ...o, source: 'shopify' }))
            ];

            const filter = document.getElementById('timeline-filter').value;
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const filtered = allOrders.filter(o => {
                const orderDate = parseDate(o.date || o.pickupDate || o.createdAt);
                if (!orderDate) return false;

                if (filter === 'today') {
                    return orderDate.toDateString() === today.toDateString();
                } else if (filter === 'tomorrow') {
                    const tomorrow = new Date(today);
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    return orderDate.toDateString() === tomorrow.toDateString();
                } else {
                    const weekEnd = new Date(today);
                    weekEnd.setDate(weekEnd.getDate() + 7);
                    return orderDate >= today && orderDate <= weekEnd;
                }
            });

            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“­</div>
                        <div>Aucune commande prÃ©vue</div>
                    </div>
                `;
                return;
            }

            // Sort by date/time
            filtered.sort((a, b) => {
                const dateA = parseDate(a.date || a.pickupDate || a.createdAt);
                const dateB = parseDate(b.date || b.pickupDate || b.createdAt);
                return dateA - dateB;
            });

            container.innerHTML = filtered.slice(0, 10).map(order => {
                const orderDate = parseDate(order.date || order.pickupDate || order.createdAt);
                const time = order.time || order.pickupTime || '--:--';
                const dateStr = orderDate ? orderDate.toLocaleDateString('fr-CH', { day: '2-digit', month: 'short' }) : 'â€”';
                
                return `
                    <div class="timeline-item">
                        <div class="timeline-time">
                            <div class="hour">${time}</div>
                            <div class="date">${dateStr}</div>
                        </div>
                        <div class="timeline-dot ${order.source}"></div>
                        <div class="timeline-content">
                            <div class="timeline-title">${order.client || order.customerName || 'Client'}</div>
                            <div class="timeline-details">
                                ${order.source === 'shopify' ? 'ğŸ›ï¸ Shopify' : order.source === 'myfish' ? 'ğŸŸ MyFish' : 'ğŸ“¦ Commande'}
                                â€¢ ${order.location || order.pickupLocation || 'â€”'}
                            </div>
                        </div>
                        <div class="timeline-amount">${(order.total || 0).toFixed(0)} CHF</div>
                    </div>
                `;
            }).join('');
        }

        function loadActivity() {
            const container = document.getElementById('activity-container');
            const orders = JSON.parse(localStorage.getItem('trakio_orders') || '[]');
            const mfOrders = JSON.parse(localStorage.getItem('mf_orders') || '[]');

            const allOrders = [...orders, ...mfOrders]
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 8);

            if (allOrders.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">âš¡</div>
                        <div>Aucune activitÃ© rÃ©cente</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = allOrders.map(order => {
                const time = new Date(order.createdAt);
                const timeStr = time.toLocaleTimeString('fr-CH', { hour: '2-digit', minute: '2-digit' });
                const dateStr = time.toLocaleDateString('fr-CH', { day: '2-digit', month: 'short' });

                return `
                    <div class="activity-item">
                        <div class="activity-icon order">ğŸ“¦</div>
                        <div class="activity-content">
                            <div class="activity-text">
                                <strong>${order.client}</strong> â€” ${(order.total || 0).toFixed(0)} CHF
                            </div>
                            <div class="activity-time">${dateStr} Ã  ${timeStr}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function checkConnections() {
            // Dropbox
            const dropboxToken = localStorage.getItem('dropbox_access_token');
            document.getElementById('status-dropbox').textContent = 
                dropboxToken ? 'Dropbox: ConnectÃ©' : 'Dropbox: DÃ©connectÃ©';

            // Firebase
            const firebaseConfig = localStorage.getItem('trakio_cloud_config');
            const firebaseDot = document.getElementById('firebase-dot');
            const firebaseStatus = document.getElementById('status-firebase');
            
            if (firebaseConfig) {
                try {
                    const config = JSON.parse(firebaseConfig);
                    if (config.provider === 'firebase') {
                        firebaseDot.className = 'dot green';
                        firebaseStatus.textContent = 'Firebase: ConnectÃ©';
                    }
                } catch {
                    firebaseDot.className = 'dot red';
                    firebaseStatus.textContent = 'Firebase: Erreur';
                }
            } else {
                firebaseDot.className = 'dot yellow';
                firebaseStatus.textContent = 'Firebase: Non configurÃ©';
            }
        }
    </script>
</body>
</html>
